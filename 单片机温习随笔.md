# 单片机学习随笔
---
## UART  （通用*异步*收发器）

##### 串口的数据帧格式
> 起始位 1位
> 数据位 8/9位
> 停止位 0.5-2位
---
传输过程
**开始时为高位(空闲),
发送方先将数据线拉低作为起始位	随后传输数据位,低电平为0,高电平为1.	
最后拉高数据线电压作为停止位,一般都是1位长度,标志着数据线再次进入空闲状态.**
>*我们一般习惯以字节为单位传输数据,因此数据位常见的格式是*
- 9位长,带一位校验位
- 8位长,不带校验位
#### 其中,校验位分为奇偶校验
<font color=red>分别代表着补上校验位后数据位中有奇偶个'1'


----
### 波特率
>每秒钟传输位的数量,如9600波特率,传输一位所需时间就为1/9600

----
使用HAL_UART_Transmit
```c
HAL_UART_Transmit(*huart , *pData , Size, Timeout)
///三者所需类型为UART_HandleTypeDef	8位无符号	16位无符号	32位无符号整型
*ps：这个函数会返回timeout后的接受结果，一般都是HAL_OK*
例如:

char *str = "你好~"
HAL_UART_Transmit(&huart1 , (uint8_t *)str , strlen(str) , HAL_MAX_DELAY);
```
 同样的，有类似的接收函数HAL_UART_Receive
 ```c
HAL_UART_Receive(*huart , *pData , Size, Timeout)
这里*pData是指向接受缓冲区的指针。
可以使用uint8_t receiveData[10]
这样的数组来作为缓冲区
```
----
---

# 总线 -  I2C
串口确实好用,但是往往一台单片机只能连接有限个通讯设备,这时就需要总线通讯了!
>I2C由两根数据线SCL^串行时钟线SerialClock^与SDA^串行数据线SerialData^组成.
>
>将主机从机的两根线分别连接在SCL与SDA总线上,再在总线上分别连接一个4.7k阻值连接Vdd的上拉电阻
>
>主机从机两个引脚都设置为***开漏***输出

<!--stackedit_data:
eyJoaXN0b3J5IjpbLTk2MTc4NjQ4MiwtMTM4NDI2NDQ5Niw4MD
Y0NDIxMTIsMTUwNDExODUwMiwtMTk5NDYwOTgwLC0xMTczODY0
NjY3XX0=
-->